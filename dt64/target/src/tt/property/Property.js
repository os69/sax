"use strict";

define(['../../core/core', '../../core/event', '../util'], function (core, event, util) {
  return core.defineClass({
    init: function init(params) {
      this.usageCounter = 0;
      this.active = false;
    },
    isActive: function isActive() {
      return this.active;
    },
    incUsage: function incUsage() {
      this.usageCounter++;

      if (this.usageCounter > 0 && !this.active) {
        this.start();
      }
    },
    decUsage: function decUsage() {
      if (this.usageCounter === 0) {
        throw 'program error';
      }

      this.usageCounter--;

      if (this.usageCounter === 0 & this.active) {
        this.stop();
      }
    },
    start: function start() {
      this.active = true;
    },
    stop: function stop() {
      this.active = false;
    }
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy90dC9wcm9wZXJ0eS9Qcm9wZXJ0eS5qcyJdLCJuYW1lcyI6WyJkZWZpbmUiLCJjb3JlIiwiZXZlbnQiLCJ1dGlsIiwiZGVmaW5lQ2xhc3MiLCJpbml0IiwicGFyYW1zIiwidXNhZ2VDb3VudGVyIiwiYWN0aXZlIiwiaXNBY3RpdmUiLCJpbmNVc2FnZSIsInN0YXJ0IiwiZGVjVXNhZ2UiLCJzdG9wIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxNQUFNLENBQUMsQ0FBQyxpQkFBRCxFQUFvQixrQkFBcEIsRUFBd0MsU0FBeEMsQ0FBRCxFQUFxRCxVQUFVQyxJQUFWLEVBQWdCQyxLQUFoQixFQUF1QkMsSUFBdkIsRUFBNkI7QUFFcEYsU0FBT0YsSUFBSSxDQUFDRyxXQUFMLENBQWlCO0FBQ3BCQyxJQUFBQSxJQUFJLEVBQUUsY0FBVUMsTUFBVixFQUFrQjtBQUNwQixXQUFLQyxZQUFMLEdBQW9CLENBQXBCO0FBQ0EsV0FBS0MsTUFBTCxHQUFjLEtBQWQ7QUFDSCxLQUptQjtBQUtwQkMsSUFBQUEsUUFBUSxFQUFFLG9CQUFZO0FBQ2xCLGFBQU8sS0FBS0QsTUFBWjtBQUNILEtBUG1CO0FBUXBCRSxJQUFBQSxRQUFRLEVBQUUsb0JBQVk7QUFDbEIsV0FBS0gsWUFBTDs7QUFDQSxVQUFJLEtBQUtBLFlBQUwsR0FBb0IsQ0FBcEIsSUFBeUIsQ0FBQyxLQUFLQyxNQUFuQyxFQUEyQztBQUN2QyxhQUFLRyxLQUFMO0FBQ0g7QUFDSixLQWJtQjtBQWNwQkMsSUFBQUEsUUFBUSxFQUFFLG9CQUFZO0FBQ2xCLFVBQUksS0FBS0wsWUFBTCxLQUFzQixDQUExQixFQUE2QjtBQUN6QixjQUFNLGVBQU47QUFDSDs7QUFDRCxXQUFLQSxZQUFMOztBQUNBLFVBQUksS0FBS0EsWUFBTCxLQUFzQixDQUF0QixHQUEwQixLQUFLQyxNQUFuQyxFQUEyQztBQUN2QyxhQUFLSyxJQUFMO0FBQ0g7QUFDSixLQXRCbUI7QUF1QnBCRixJQUFBQSxLQUFLLEVBQUUsaUJBQVk7QUFDZixXQUFLSCxNQUFMLEdBQWMsSUFBZDtBQUNILEtBekJtQjtBQTBCcEJLLElBQUFBLElBQUksRUFBRSxnQkFBWTtBQUNkLFdBQUtMLE1BQUwsR0FBYyxLQUFkO0FBQ0g7QUE1Qm1CLEdBQWpCLENBQVA7QUErQkgsQ0FqQ0ssQ0FBTiIsInNvdXJjZXNDb250ZW50IjpbImRlZmluZShbJy4uLy4uL2NvcmUvY29yZScsICcuLi8uLi9jb3JlL2V2ZW50JywgJy4uL3V0aWwnXSwgZnVuY3Rpb24gKGNvcmUsIGV2ZW50LCB1dGlsKSB7XG5cbiAgICByZXR1cm4gY29yZS5kZWZpbmVDbGFzcyh7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgIHRoaXMudXNhZ2VDb3VudGVyID0gMDtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7ICBcbiAgICAgICAgfSxcbiAgICAgICAgaXNBY3RpdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5jVXNhZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudXNhZ2VDb3VudGVyKys7XG4gICAgICAgICAgICBpZiAodGhpcy51c2FnZUNvdW50ZXIgPiAwICYmICF0aGlzLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVjVXNhZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnVzYWdlQ291bnRlciA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93ICdwcm9ncmFtIGVycm9yJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXNhZ2VDb3VudGVyLS07XG4gICAgICAgICAgICBpZiAodGhpcy51c2FnZUNvdW50ZXIgPT09IDAgJiB0aGlzLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzdGFydDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbn0pOyJdfQ==