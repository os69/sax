"use strict";

define(['../../core/core', '../../core/decorate', '../../core/event', '../property/PropertyCollector'], function (core, decorate, event, PropertyCollector) {
  var module = {};

  module.initList = function (list) {
    if (!decorate.isDecorated(list, 'push', 'raise-push-event')) {
      decorate.decorate(list, 'push', 'raise-push-event', null, function () {
        event.raiseEvent(list, 'push', core.argumentsToList(arguments));
        event.raiseEvent(list, 'setLength', list.length);
      });
    }

    if (!decorate.isDecorated(list, 'splice', 'raise-splice-event')) {
      decorate.decorate(list, 'splice', 'raise-splice-event', null, function () {
        event.raiseEvent(list, 'splice', core.argumentsToList(arguments));
        event.raiseEvent(list, 'setLength', list.length);
      });
    }

    if (!list.getLength) {
      list.getLength = function () {
        PropertyCollector.notify({
          obj: list,
          propertyName: 'length'
        });
        return list.length;
      };
    }
  };

  return module;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy90dC9saXN0L2luaXRMaXN0LmpzIl0sIm5hbWVzIjpbImRlZmluZSIsImNvcmUiLCJkZWNvcmF0ZSIsImV2ZW50IiwiUHJvcGVydHlDb2xsZWN0b3IiLCJtb2R1bGUiLCJpbml0TGlzdCIsImxpc3QiLCJpc0RlY29yYXRlZCIsInJhaXNlRXZlbnQiLCJhcmd1bWVudHNUb0xpc3QiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJnZXRMZW5ndGgiLCJub3RpZnkiLCJvYmoiLCJwcm9wZXJ0eU5hbWUiXSwibWFwcGluZ3MiOiI7O0FBQUFBLE1BQU0sQ0FBQyxDQUFDLGlCQUFELEVBQW9CLHFCQUFwQixFQUEyQyxrQkFBM0MsRUFBK0QsK0JBQS9ELENBQUQsRUFBa0csVUFBVUMsSUFBVixFQUFnQkMsUUFBaEIsRUFBMEJDLEtBQTFCLEVBQWlDQyxpQkFBakMsRUFBb0Q7QUFFeEosTUFBSUMsTUFBTSxHQUFHLEVBQWI7O0FBRUFBLEVBQUFBLE1BQU0sQ0FBQ0MsUUFBUCxHQUFrQixVQUFVQyxJQUFWLEVBQWdCO0FBQzlCLFFBQUksQ0FBQ0wsUUFBUSxDQUFDTSxXQUFULENBQXFCRCxJQUFyQixFQUEyQixNQUEzQixFQUFtQyxrQkFBbkMsQ0FBTCxFQUE2RDtBQUN6REwsTUFBQUEsUUFBUSxDQUFDQSxRQUFULENBQWtCSyxJQUFsQixFQUF3QixNQUF4QixFQUFnQyxrQkFBaEMsRUFBb0QsSUFBcEQsRUFBMEQsWUFBWTtBQUNsRUosUUFBQUEsS0FBSyxDQUFDTSxVQUFOLENBQWlCRixJQUFqQixFQUF1QixNQUF2QixFQUErQk4sSUFBSSxDQUFDUyxlQUFMLENBQXFCQyxTQUFyQixDQUEvQjtBQUNBUixRQUFBQSxLQUFLLENBQUNNLFVBQU4sQ0FBaUJGLElBQWpCLEVBQXVCLFdBQXZCLEVBQW9DQSxJQUFJLENBQUNLLE1BQXpDO0FBQ0gsT0FIRDtBQUlIOztBQUNELFFBQUksQ0FBQ1YsUUFBUSxDQUFDTSxXQUFULENBQXFCRCxJQUFyQixFQUEyQixRQUEzQixFQUFxQyxvQkFBckMsQ0FBTCxFQUFpRTtBQUM3REwsTUFBQUEsUUFBUSxDQUFDQSxRQUFULENBQWtCSyxJQUFsQixFQUF3QixRQUF4QixFQUFrQyxvQkFBbEMsRUFBd0QsSUFBeEQsRUFBOEQsWUFBWTtBQUN0RUosUUFBQUEsS0FBSyxDQUFDTSxVQUFOLENBQWlCRixJQUFqQixFQUF1QixRQUF2QixFQUFpQ04sSUFBSSxDQUFDUyxlQUFMLENBQXFCQyxTQUFyQixDQUFqQztBQUNBUixRQUFBQSxLQUFLLENBQUNNLFVBQU4sQ0FBaUJGLElBQWpCLEVBQXVCLFdBQXZCLEVBQW9DQSxJQUFJLENBQUNLLE1BQXpDO0FBQ0gsT0FIRDtBQUlIOztBQUNELFFBQUksQ0FBQ0wsSUFBSSxDQUFDTSxTQUFWLEVBQXFCO0FBQ2pCTixNQUFBQSxJQUFJLENBQUNNLFNBQUwsR0FBaUIsWUFBWTtBQUN6QlQsUUFBQUEsaUJBQWlCLENBQUNVLE1BQWxCLENBQXlCO0FBQUVDLFVBQUFBLEdBQUcsRUFBRVIsSUFBUDtBQUFhUyxVQUFBQSxZQUFZLEVBQUU7QUFBM0IsU0FBekI7QUFDQSxlQUFPVCxJQUFJLENBQUNLLE1BQVo7QUFDSCxPQUhEO0FBSUg7QUFDSixHQW5CRDs7QUFxQkEsU0FBT1AsTUFBUDtBQUVILENBM0JLLENBQU4iLCJzb3VyY2VzQ29udGVudCI6WyJkZWZpbmUoWycuLi8uLi9jb3JlL2NvcmUnLCAnLi4vLi4vY29yZS9kZWNvcmF0ZScsICcuLi8uLi9jb3JlL2V2ZW50JywgJy4uL3Byb3BlcnR5L1Byb3BlcnR5Q29sbGVjdG9yJ10sIGZ1bmN0aW9uIChjb3JlLCBkZWNvcmF0ZSwgZXZlbnQsIFByb3BlcnR5Q29sbGVjdG9yKSB7XG5cbiAgICB2YXIgbW9kdWxlID0ge307XG5cbiAgICBtb2R1bGUuaW5pdExpc3QgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgICBpZiAoIWRlY29yYXRlLmlzRGVjb3JhdGVkKGxpc3QsICdwdXNoJywgJ3JhaXNlLXB1c2gtZXZlbnQnKSkge1xuICAgICAgICAgICAgZGVjb3JhdGUuZGVjb3JhdGUobGlzdCwgJ3B1c2gnLCAncmFpc2UtcHVzaC1ldmVudCcsIG51bGwsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBldmVudC5yYWlzZUV2ZW50KGxpc3QsICdwdXNoJywgY29yZS5hcmd1bWVudHNUb0xpc3QoYXJndW1lbnRzKSk7XG4gICAgICAgICAgICAgICAgZXZlbnQucmFpc2VFdmVudChsaXN0LCAnc2V0TGVuZ3RoJywgbGlzdC5sZW5ndGgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkZWNvcmF0ZS5pc0RlY29yYXRlZChsaXN0LCAnc3BsaWNlJywgJ3JhaXNlLXNwbGljZS1ldmVudCcpKSB7XG4gICAgICAgICAgICBkZWNvcmF0ZS5kZWNvcmF0ZShsaXN0LCAnc3BsaWNlJywgJ3JhaXNlLXNwbGljZS1ldmVudCcsIG51bGwsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBldmVudC5yYWlzZUV2ZW50KGxpc3QsICdzcGxpY2UnLCBjb3JlLmFyZ3VtZW50c1RvTGlzdChhcmd1bWVudHMpKTtcbiAgICAgICAgICAgICAgICBldmVudC5yYWlzZUV2ZW50KGxpc3QsICdzZXRMZW5ndGgnLCBsaXN0Lmxlbmd0aCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWxpc3QuZ2V0TGVuZ3RoKSB7XG4gICAgICAgICAgICBsaXN0LmdldExlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBQcm9wZXJ0eUNvbGxlY3Rvci5ub3RpZnkoeyBvYmo6IGxpc3QsIHByb3BlcnR5TmFtZTogJ2xlbmd0aCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpc3QubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1vZHVsZTtcblxufSk7XG4iXX0=