"use strict";

define(['../../../../src/index', './workoutBrowser', './workoutRunner', '../../model/Model'], function (tt, workoutBrowser, workoutRunner, Model) {
  var module = {
    createTtNode: tt.createTtNodeCreator({
      init: function init(params) {
        this.model = params.model;
        this.mode = 'workout-browser';
        tt.initProperty(this, 'mode');
      },
      runWorkout: function runWorkout(workout) {
        console.log('run', workout);
        this.workoutParameter = workout;
        this.setMode('workout-runner');
      },
      showWorkout: function showWorkout(workout) {
        this.workoutParameter = workout;
        this.setMode('workout-browser');
      },
      render: function render() {
        return tt.createTtNode({
          type: 'div',
          children: function () {
            var root = this.model.getRoot();
            this.setMode('workout-browser');
            return [tt.createTtNode({
              type: 'div',
              children: function () {
                var mode = this.getMode();
                var children;

                switch (mode) {
                  case 'workout-browser':
                    children = [workoutBrowser.createTtNode({
                      root: root,
                      workout: this.workoutParameter,
                      mobileUi: this
                    })];
                    break;

                  case 'workout-runner':
                    children = [workoutRunner.createTtNode({
                      workout: this.workoutParameter,
                      mobileUi: this
                    })];
                    break;
                }

                this.workoutParameter = null;
                return children;
              }.bind(this)
            })];
          }.bind(this)
        });
      }
    }),
    start: function start() {
      var model = new Model();
      document.getElementById('rootContainer').appendChild(this.createTtNode({
        model: model
      }).getDomNode());
      model.load();
    }
  };
  return module;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NhbXBsZXMvc3BvcnRzL3VpL21vYmlsZV9vbGQvbW9iaWxlVUkuanMiXSwibmFtZXMiOlsiZGVmaW5lIiwidHQiLCJ3b3Jrb3V0QnJvd3NlciIsIndvcmtvdXRSdW5uZXIiLCJNb2RlbCIsIm1vZHVsZSIsImNyZWF0ZVR0Tm9kZSIsImNyZWF0ZVR0Tm9kZUNyZWF0b3IiLCJpbml0IiwicGFyYW1zIiwibW9kZWwiLCJtb2RlIiwiaW5pdFByb3BlcnR5IiwicnVuV29ya291dCIsIndvcmtvdXQiLCJjb25zb2xlIiwibG9nIiwid29ya291dFBhcmFtZXRlciIsInNldE1vZGUiLCJzaG93V29ya291dCIsInJlbmRlciIsInR5cGUiLCJjaGlsZHJlbiIsInJvb3QiLCJnZXRSb290IiwiZ2V0TW9kZSIsIm1vYmlsZVVpIiwiYmluZCIsInN0YXJ0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiZ2V0RG9tTm9kZSIsImxvYWQiXSwibWFwcGluZ3MiOiI7O0FBQUFBLE1BQU0sQ0FBQyxDQUFDLHVCQUFELEVBQTBCLGtCQUExQixFQUE4QyxpQkFBOUMsRUFBZ0UsbUJBQWhFLENBQUQsRUFBdUYsVUFBVUMsRUFBVixFQUFjQyxjQUFkLEVBQThCQyxhQUE5QixFQUE2Q0MsS0FBN0MsRUFBb0Q7QUFFN0ksTUFBSUMsTUFBTSxHQUFHO0FBRVRDLElBQUFBLFlBQVksRUFBRUwsRUFBRSxDQUFDTSxtQkFBSCxDQUF1QjtBQUNqQ0MsTUFBQUEsSUFBSSxFQUFFLGNBQVVDLE1BQVYsRUFBa0I7QUFDcEIsYUFBS0MsS0FBTCxHQUFhRCxNQUFNLENBQUNDLEtBQXBCO0FBQ0EsYUFBS0MsSUFBTCxHQUFZLGlCQUFaO0FBQ0FWLFFBQUFBLEVBQUUsQ0FBQ1csWUFBSCxDQUFnQixJQUFoQixFQUFzQixNQUF0QjtBQUNILE9BTGdDO0FBTWpDQyxNQUFBQSxVQUFVLEVBQUUsb0JBQVVDLE9BQVYsRUFBbUI7QUFDM0JDLFFBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLEtBQVosRUFBbUJGLE9BQW5CO0FBQ0EsYUFBS0csZ0JBQUwsR0FBd0JILE9BQXhCO0FBQ0EsYUFBS0ksT0FBTCxDQUFhLGdCQUFiO0FBQ0gsT0FWZ0M7QUFXakNDLE1BQUFBLFdBQVcsRUFBRSxxQkFBVUwsT0FBVixFQUFtQjtBQUM1QixhQUFLRyxnQkFBTCxHQUF3QkgsT0FBeEI7QUFDQSxhQUFLSSxPQUFMLENBQWEsaUJBQWI7QUFDSCxPQWRnQztBQWVqQ0UsTUFBQUEsTUFBTSxFQUFFLGtCQUFZO0FBQ2hCLGVBQU9uQixFQUFFLENBQUNLLFlBQUgsQ0FBZ0I7QUFDbkJlLFVBQUFBLElBQUksRUFBRSxLQURhO0FBRW5CQyxVQUFBQSxRQUFRLEVBQUUsWUFBWTtBQUNsQixnQkFBSUMsSUFBSSxHQUFHLEtBQUtiLEtBQUwsQ0FBV2MsT0FBWCxFQUFYO0FBQ0EsaUJBQUtOLE9BQUwsQ0FBYSxpQkFBYjtBQUNBLG1CQUFPLENBQUNqQixFQUFFLENBQUNLLFlBQUgsQ0FBZ0I7QUFDcEJlLGNBQUFBLElBQUksRUFBRSxLQURjO0FBRXBCQyxjQUFBQSxRQUFRLEVBQUUsWUFBWTtBQUNsQixvQkFBSVgsSUFBSSxHQUFHLEtBQUtjLE9BQUwsRUFBWDtBQUNBLG9CQUFJSCxRQUFKOztBQUNBLHdCQUFRWCxJQUFSO0FBQ0ksdUJBQUssaUJBQUw7QUFDSVcsb0JBQUFBLFFBQVEsR0FBRyxDQUFDcEIsY0FBYyxDQUFDSSxZQUFmLENBQTRCO0FBQUVpQixzQkFBQUEsSUFBSSxFQUFFQSxJQUFSO0FBQWNULHNCQUFBQSxPQUFPLEVBQUUsS0FBS0csZ0JBQTVCO0FBQThDUyxzQkFBQUEsUUFBUSxFQUFFO0FBQXhELHFCQUE1QixDQUFELENBQVg7QUFDQTs7QUFDSix1QkFBSyxnQkFBTDtBQUNJSixvQkFBQUEsUUFBUSxHQUFHLENBQUNuQixhQUFhLENBQUNHLFlBQWQsQ0FBMkI7QUFBRVEsc0JBQUFBLE9BQU8sRUFBRSxLQUFLRyxnQkFBaEI7QUFBa0NTLHNCQUFBQSxRQUFRLEVBQUU7QUFBNUMscUJBQTNCLENBQUQsQ0FBWDtBQUNBO0FBTlI7O0FBUUEscUJBQUtULGdCQUFMLEdBQXdCLElBQXhCO0FBQ0EsdUJBQU9LLFFBQVA7QUFDSCxlQWJTLENBYVJLLElBYlEsQ0FhSCxJQWJHO0FBRlUsYUFBaEIsQ0FBRCxDQUFQO0FBaUJILFdBcEJTLENBb0JSQSxJQXBCUSxDQW9CSCxJQXBCRztBQUZTLFNBQWhCLENBQVA7QUF3Qkg7QUF4Q2dDLEtBQXZCLENBRkw7QUE2Q1RDLElBQUFBLEtBQUssRUFBRSxpQkFBVTtBQUNiLFVBQUlsQixLQUFLLEdBQUcsSUFBSU4sS0FBSixFQUFaO0FBQ0F5QixNQUFBQSxRQUFRLENBQUNDLGNBQVQsQ0FBd0IsZUFBeEIsRUFBeUNDLFdBQXpDLENBQXFELEtBQUt6QixZQUFMLENBQWtCO0FBQUVJLFFBQUFBLEtBQUssRUFBRUE7QUFBVCxPQUFsQixFQUFvQ3NCLFVBQXBDLEVBQXJEO0FBQ0F0QixNQUFBQSxLQUFLLENBQUN1QixJQUFOO0FBQ0g7QUFqRFEsR0FBYjtBQW9EQSxTQUFPNUIsTUFBUDtBQUVILENBeERLLENBQU4iLCJzb3VyY2VzQ29udGVudCI6WyJkZWZpbmUoWycuLi8uLi8uLi8uLi9zcmMvaW5kZXgnLCAnLi93b3Jrb3V0QnJvd3NlcicsICcuL3dvcmtvdXRSdW5uZXInLCcuLi8uLi9tb2RlbC9Nb2RlbCddLCBmdW5jdGlvbiAodHQsIHdvcmtvdXRCcm93c2VyLCB3b3Jrb3V0UnVubmVyLCBNb2RlbCkge1xuXG4gICAgdmFyIG1vZHVsZSA9IHtcblxuICAgICAgICBjcmVhdGVUdE5vZGU6IHR0LmNyZWF0ZVR0Tm9kZUNyZWF0b3Ioe1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgICAgIHRoaXMubW9kZWwgPSBwYXJhbXMubW9kZWw7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlID0gJ3dvcmtvdXQtYnJvd3Nlcic7XG4gICAgICAgICAgICAgICAgdHQuaW5pdFByb3BlcnR5KHRoaXMsICdtb2RlJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcnVuV29ya291dDogZnVuY3Rpb24gKHdvcmtvdXQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncnVuJywgd29ya291dCk7XG4gICAgICAgICAgICAgICAgdGhpcy53b3Jrb3V0UGFyYW1ldGVyID0gd29ya291dDtcbiAgICAgICAgICAgICAgICB0aGlzLnNldE1vZGUoJ3dvcmtvdXQtcnVubmVyJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2hvd1dvcmtvdXQ6IGZ1bmN0aW9uICh3b3Jrb3V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy53b3Jrb3V0UGFyYW1ldGVyID0gd29ya291dDtcbiAgICAgICAgICAgICAgICB0aGlzLnNldE1vZGUoJ3dvcmtvdXQtYnJvd3NlcicpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb290ID0gdGhpcy5tb2RlbC5nZXRSb290KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE1vZGUoJ3dvcmtvdXQtYnJvd3NlcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb2RlID0gdGhpcy5nZXRNb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd3b3Jrb3V0LWJyb3dzZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuID0gW3dvcmtvdXRCcm93c2VyLmNyZWF0ZVR0Tm9kZSh7IHJvb3Q6IHJvb3QsIHdvcmtvdXQ6IHRoaXMud29ya291dFBhcmFtZXRlciwgbW9iaWxlVWk6IHRoaXMgfSldXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd3b3Jrb3V0LXJ1bm5lcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4gPSBbd29ya291dFJ1bm5lci5jcmVhdGVUdE5vZGUoeyB3b3Jrb3V0OiB0aGlzLndvcmtvdXRQYXJhbWV0ZXIsIG1vYmlsZVVpOiB0aGlzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtvdXRQYXJhbWV0ZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcblxuICAgICAgICBzdGFydDogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBtb2RlbCA9IG5ldyBNb2RlbCgpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3RDb250YWluZXInKS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVR0Tm9kZSh7IG1vZGVsOiBtb2RlbCB9KS5nZXREb21Ob2RlKCkpO1xuICAgICAgICAgICAgbW9kZWwubG9hZCgpOyAgICAgICAgXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIG1vZHVsZTtcblxufSk7XG4iXX0=