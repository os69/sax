"use strict";

define(['../../../../src/index', '../../model/WorkoutCollection', '../../model/WorkoutBasic', '../../model/WorkoutItemCollection', '../../model/WorkoutItem', '../../model/Root', '../common/time', './stopWatch'], function (tt, WorkoutCollection, WorkoutBasic, WorkoutItemCollection, WorkoutItem, Root, time, stopWatch) {
  var ce = tt.core.cloneExtend.bind(tt.core);
  return {
    createTtNode: function createTtNode(params) {
      return tt.createTtNode({
        type: 'div',
        children: function () {
          var focusObject = params.ui.getFocusObject();

          if (focusObject instanceof WorkoutCollection) {
            return [this.createWorkoutCollectionTtNode(ce(params, {
              workoutCollection: focusObject
            }))];
          }

          if (focusObject instanceof WorkoutBasic) {
            return [this.createWorkoutBasicTtNode(ce(params, {
              workoutBasic: focusObject
            }))];
          }

          if (focusObject instanceof WorkoutItemCollection) {
            return [this.createWorkoutItemCollectionTtNode(ce(params, {
              workoutItemCollection: focusObject
            }))];
          }

          if (focusObject instanceof WorkoutItem) {
            return [this.createWorkoutItemTtNode(ce(params, {
              workoutItem: focusObject
            }))];
          }
        }.bind(this)
      });
    },
    createHeaderTtNode: function createHeaderTtNode(params) {
      var children = [];

      if (params.parent) {
        children.push(tt.createTtNode({
          type: 'i',
          css: ['fas', 'fa-arrow-left', 'field-2'],
          click: function click() {
            params.ui.setFocusObject(params.parent);
          }
        }));
      }

      children.push.apply(children, params.children);
      return tt.createTtNode({
        type: 'div',
        css: ['workout-runner-header'],
        children: children
      });
    },
    createStatisticTtNodes: function createStatisticTtNodes(item) {
      return [tt.createTtNode({
        type: 'div',
        css: ['field-2'],
        text: function text() {
          var totalDuration = item.getTotalDuration();

          if (totalDuration !== 0) {
            var progress = Math.trunc(item.getElapsed() / totalDuration * 100);
            return progress + '%';
          } else {
            return '100%';
          }
        }
      }), tt.createTtNode({
        type: 'div',
        css: ['field-2'],
        text: function text() {
          return time.int2ext(item.getTotalDuration() - item.getElapsed());
        }
      })];
    },
    // ===================================================================
    // workout basic
    // ===================================================================
    createWorkoutBasicTtNode: function createWorkoutBasicTtNode(params) {
      return tt.createTtNode({
        type: 'div',
        children: [this.createHeaderTtNode({
          children: [tt.createTtNode({
            type: 'div',
            css: ['field-grow'],
            text: function text() {
              return params.workoutBasic.getName();
            }
          })]
        }), tt.createTtNode({
          type: 'div',
          css: ['workout-runner-toolbar'],
          children: this.createStatisticTtNodes(params.workoutBasic)
        }), tt.createTtNode({
          type: 'div',
          children: tt.createMappedList(params.workoutBasic.items, function (item) {
            if (item instanceof WorkoutItem) {
              return this.createWorkoutItemChildTtNode(ce(params, {
                workoutItem: item
              }));
            }

            if (item instanceof WorkoutItemCollection) {
              return this.createWorkoutItemCollectionChildTtNode(ce(params, {
                workoutItemCollection: item
              }));
            }
          }.bind(this))
        })]
      });
    },
    createWorkoutItemChildTtNode: function createWorkoutItemChildTtNode(params) {
      tt.initProperty(params.workoutItem, 'exercise');
      tt.initProperty(params.workoutItem.exercise, 'helpUrl');
      var line1 = [];
      var helpUrl = params.workoutItem.getExercise().getHelpUrl();

      if (helpUrl) {
        line1.push(tt.createTtNode({
          type: 'a',
          css: ['field-grow'],
          text: function text() {
            return params.workoutItem.getExercise().getName();
          },
          href: function href() {
            return helpUrl;
          },
          target: '_blank'
        }));
      } else {
        line1.push(tt.createTtNode({
          type: 'div',
          css: ['field-grow'],
          text: function text() {
            return params.workoutItem.getExercise().getName();
          }
        }));
      }

      line1.push(tt.createTtNode({
        type: 'div',
        css: ['field-5'],
        text: function text() {
          return params.workoutItem.getName();
        }
      }));
      var line2 = [];

      if (params.workoutItem.getCount() > 1) {
        line2.push(tt.createTtNode({
          type: 'div',
          css: ['field-grow'],
          text: function text() {
            return 'x' + params.workoutItem.getCount();
          }
        }));
        line2.push(tt.createTtNode({
          type: 'div',
          css: ['field-5'],
          text: function text() {
            return time.int2ext(params.workoutItem.getDuration());
          }
        }));
      } else {
        line2.push(stopWatch.createTtNode({
          seconds: params.workoutItem.getDuration(),
          finished: function finished() {
            navigator && navigator.notification && navigator.notification.beep(1);
          }
        }));
      }

      return tt.createTtNode({
        type: 'div',
        css: function css() {
          if (!params.workoutItem.getChecked()) {
            return ['workout-runner-item'];
          } else {
            return ['workout-runner-item', 'workout-runner-item-checked'];
          }
        },
        children: [tt.createTtNode({
          type: 'i',
          css: function css() {
            if (params.workoutItem.getChecked()) {
              return ['workout-runner-item-checkbox', 'fa', 'fa-check-square'];
            } else {
              return ['workout-runner-item-checkbox', 'fa', 'fa-square'];
            }
          },
          click: function click() {
            params.workoutItem.setChecked(!params.workoutItem.getChecked());
          }
        }), tt.createTtNode({
          type: 'div',
          css: ['workout-runner-item-lines'],
          children: [// line 1
          tt.createTtNode({
            type: 'div',
            css: ['workout-runner-item-line1'],
            children: line1
          }), // line 2
          tt.createTtNode({
            type: 'div',
            css: ['workout-runner-item-line2'],
            children: line2
          })]
        })]
      });
    },
    createWorkoutItemCollectionChildTtNode: function createWorkoutItemCollectionChildTtNode(params) {
      var statisticTtNodes = this.createStatisticTtNodes(params.workoutItemCollection);
      return tt.createTtNode({
        type: 'div',
        css: function css() {
          if (!params.workoutItemCollection.getChecked()) {
            return ['workout-runner-item'];
          } else {
            return ['workout-runner-item', 'workout-runner-item-checked'];
          }
        },
        children: [tt.createTtNode({
          type: 'i',
          css: function css() {
            if (params.workoutItemCollection.getChecked()) {
              return ['workout-runner-item-checkbox', 'fa', 'fa-check-square', 'field-2'];
            } else {
              return ['workout-runner-item-checkbox', 'fa', 'fa-square', 'field-2'];
            }
          }
        }), tt.createTtNode({
          type: 'div',
          css: ['field-grow'],
          text: function text() {
            return params.workoutItemCollection.getName();
          }
        }), statisticTtNodes[0], statisticTtNodes[1]],
        click: function () {
          params.ui.setFocusObject(params.workoutItemCollection);
        }.bind(this)
      });
    },
    // ===================================================================
    // workout item collection
    // ===================================================================
    createWorkoutItemCollectionTtNode: function createWorkoutItemCollectionTtNode(params) {
      return tt.createTtNode({
        type: 'div',
        children: [this.createHeaderTtNode({
          parent: params.workoutItemCollection.parent,
          ui: params.ui,
          children: [tt.createTtNode({
            type: 'div',
            css: ['field-grow'],
            text: function text() {
              return params.workoutItemCollection.getName();
            }
          })]
        }), tt.createTtNode({
          type: 'div',
          css: ['workout-runner-toolbar'],
          children: this.createStatisticTtNodes(params.workoutItemCollection)
        }), tt.createTtNode({
          type: 'div',
          children: tt.createMappedList(params.workoutItemCollection.items, function (item) {
            if (item instanceof WorkoutItem) {
              return this.createWorkoutItemChildTtNode(ce(params, {
                workoutItem: item
              }));
            }

            if (item instanceof WorkoutItemCollection) {
              return this.createWorkoutItemCollectionChildTtNode(ce(params, {
                workoutItemCollection: item
              }));
            }
          }.bind(this))
        })]
      });
    }
  };
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NhbXBsZXMvc3BvcnRzL3VpL21vYmlsZS93b3Jrb3V0UnVubmVyLmpzIl0sIm5hbWVzIjpbImRlZmluZSIsInR0IiwiV29ya291dENvbGxlY3Rpb24iLCJXb3Jrb3V0QmFzaWMiLCJXb3Jrb3V0SXRlbUNvbGxlY3Rpb24iLCJXb3Jrb3V0SXRlbSIsIlJvb3QiLCJ0aW1lIiwic3RvcFdhdGNoIiwiY2UiLCJjb3JlIiwiY2xvbmVFeHRlbmQiLCJiaW5kIiwiY3JlYXRlVHROb2RlIiwicGFyYW1zIiwidHlwZSIsImNoaWxkcmVuIiwiZm9jdXNPYmplY3QiLCJ1aSIsImdldEZvY3VzT2JqZWN0IiwiY3JlYXRlV29ya291dENvbGxlY3Rpb25UdE5vZGUiLCJ3b3Jrb3V0Q29sbGVjdGlvbiIsImNyZWF0ZVdvcmtvdXRCYXNpY1R0Tm9kZSIsIndvcmtvdXRCYXNpYyIsImNyZWF0ZVdvcmtvdXRJdGVtQ29sbGVjdGlvblR0Tm9kZSIsIndvcmtvdXRJdGVtQ29sbGVjdGlvbiIsImNyZWF0ZVdvcmtvdXRJdGVtVHROb2RlIiwid29ya291dEl0ZW0iLCJjcmVhdGVIZWFkZXJUdE5vZGUiLCJwYXJlbnQiLCJwdXNoIiwiY3NzIiwiY2xpY2siLCJzZXRGb2N1c09iamVjdCIsImFwcGx5IiwiY3JlYXRlU3RhdGlzdGljVHROb2RlcyIsIml0ZW0iLCJ0ZXh0IiwidG90YWxEdXJhdGlvbiIsImdldFRvdGFsRHVyYXRpb24iLCJwcm9ncmVzcyIsIk1hdGgiLCJ0cnVuYyIsImdldEVsYXBzZWQiLCJpbnQyZXh0IiwiZ2V0TmFtZSIsImNyZWF0ZU1hcHBlZExpc3QiLCJpdGVtcyIsImNyZWF0ZVdvcmtvdXRJdGVtQ2hpbGRUdE5vZGUiLCJjcmVhdGVXb3Jrb3V0SXRlbUNvbGxlY3Rpb25DaGlsZFR0Tm9kZSIsImluaXRQcm9wZXJ0eSIsImV4ZXJjaXNlIiwibGluZTEiLCJoZWxwVXJsIiwiZ2V0RXhlcmNpc2UiLCJnZXRIZWxwVXJsIiwiaHJlZiIsInRhcmdldCIsImxpbmUyIiwiZ2V0Q291bnQiLCJnZXREdXJhdGlvbiIsInNlY29uZHMiLCJmaW5pc2hlZCIsIm5hdmlnYXRvciIsIm5vdGlmaWNhdGlvbiIsImJlZXAiLCJnZXRDaGVja2VkIiwic2V0Q2hlY2tlZCIsInN0YXRpc3RpY1R0Tm9kZXMiXSwibWFwcGluZ3MiOiI7O0FBQUFBLE1BQU0sQ0FBQyxDQUFDLHVCQUFELEVBQTBCLCtCQUExQixFQUEyRCwwQkFBM0QsRUFBdUYsbUNBQXZGLEVBQTRILHlCQUE1SCxFQUF1SixrQkFBdkosRUFBMkssZ0JBQTNLLEVBQTZMLGFBQTdMLENBQUQsRUFBOE0sVUFBVUMsRUFBVixFQUFjQyxpQkFBZCxFQUFpQ0MsWUFBakMsRUFBK0NDLHFCQUEvQyxFQUFzRUMsV0FBdEUsRUFBbUZDLElBQW5GLEVBQXlGQyxJQUF6RixFQUErRkMsU0FBL0YsRUFBMEc7QUFFMVQsTUFBSUMsRUFBRSxHQUFHUixFQUFFLENBQUNTLElBQUgsQ0FBUUMsV0FBUixDQUFvQkMsSUFBcEIsQ0FBeUJYLEVBQUUsQ0FBQ1MsSUFBNUIsQ0FBVDtBQUVBLFNBQU87QUFFSEcsSUFBQUEsWUFBWSxFQUFFLHNCQUFVQyxNQUFWLEVBQWtCO0FBQzVCLGFBQU9iLEVBQUUsQ0FBQ1ksWUFBSCxDQUFnQjtBQUNuQkUsUUFBQUEsSUFBSSxFQUFFLEtBRGE7QUFFbkJDLFFBQUFBLFFBQVEsRUFBRSxZQUFZO0FBQ2xCLGNBQUlDLFdBQVcsR0FBR0gsTUFBTSxDQUFDSSxFQUFQLENBQVVDLGNBQVYsRUFBbEI7O0FBQ0EsY0FBSUYsV0FBVyxZQUFZZixpQkFBM0IsRUFBOEM7QUFDMUMsbUJBQU8sQ0FBQyxLQUFLa0IsNkJBQUwsQ0FBbUNYLEVBQUUsQ0FBQ0ssTUFBRCxFQUFTO0FBQUVPLGNBQUFBLGlCQUFpQixFQUFFSjtBQUFyQixhQUFULENBQXJDLENBQUQsQ0FBUDtBQUNIOztBQUNELGNBQUlBLFdBQVcsWUFBWWQsWUFBM0IsRUFBeUM7QUFDckMsbUJBQU8sQ0FBQyxLQUFLbUIsd0JBQUwsQ0FBOEJi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Q0ssTUFBRCxFQUFTO0FBQUVXLGdCQUFBQSxxQkFBcUIsRUFBRVc7QUFBekIsZUFBVCxDQUE5QyxDQUFQO0FBQ0g7QUFDSixXQVBpRSxDQU9oRXhCLElBUGdFLENBTzNELElBUDJELENBQXhEO0FBRkUsU0FBaEIsQ0FqQk07QUFGUyxPQUFoQixDQUFQO0FBZ0NIO0FBN1FFLEdBQVA7QUFpUkgsQ0FyUkssQ0FBTiIsInNvdXJjZXNDb250ZW50IjpbImRlZmluZShbJy4uLy4uLy4uLy4uL3NyYy9pbmRleCcsICcuLi8uLi9tb2RlbC9Xb3Jrb3V0Q29sbGVjdGlvbicsICcuLi8uLi9tb2RlbC9Xb3Jrb3V0QmFzaWMnLCAnLi4vLi4vbW9kZWwvV29ya291dEl0ZW1Db2xsZWN0aW9uJywgJy4uLy4uL21vZGVsL1dvcmtvdXRJdGVtJywgJy4uLy4uL21vZGVsL1Jvb3QnLCAnLi4vY29tbW9uL3RpbWUnLCAnLi9zdG9wV2F0Y2gnXSwgZnVuY3Rpb24gKHR0LCBXb3Jrb3V0Q29sbGVjdGlvbiwgV29ya291dEJhc2ljLCBXb3Jrb3V0SXRlbUNvbGxlY3Rpb24sIFdvcmtvdXRJdGVtLCBSb290LCB0aW1lLCBzdG9wV2F0Y2gpIHtcblxuICAgIHZhciBjZSA9IHR0LmNvcmUuY2xvbmVFeHRlbmQuYmluZCh0dC5jb3JlKTtcblxuICAgIHJldHVybiB7XG5cbiAgICAgICAgY3JlYXRlVHROb2RlOiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9jdXNPYmplY3QgPSBwYXJhbXMudWkuZ2V0Rm9jdXNPYmplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvY3VzT2JqZWN0IGluc3RhbmNlb2YgV29ya291dENvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbdGhpcy5jcmVhdGVXb3Jrb3V0Q29sbGVjdGlvblR0Tm9kZShjZShwYXJhbXMsIHsgd29ya291dENvbGxlY3Rpb246IGZvY3VzT2JqZWN0IH0pKV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvY3VzT2JqZWN0IGluc3RhbmNlb2YgV29ya291dEJhc2ljKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3RoaXMuY3JlYXRlV29ya291dEJhc2ljVHROb2RlKGNlKHBhcmFtcywgeyB3b3Jrb3V0QmFzaWM6IGZvY3VzT2JqZWN0IH0pKV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvY3VzT2JqZWN0IGluc3RhbmNlb2YgV29ya291dEl0ZW1Db2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3RoaXMuY3JlYXRlV29ya291dEl0ZW1Db2xsZWN0aW9uVHROb2RlKGNlKHBhcmFtcywgeyB3b3Jrb3V0SXRlbUNvbGxlY3Rpb246IGZvY3VzT2JqZWN0IH0pKV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvY3VzT2JqZWN0IGluc3RhbmNlb2YgV29ya291dEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbdGhpcy5jcmVhdGVXb3Jrb3V0SXRlbVR0Tm9kZShjZShwYXJhbXMsIHsgd29ya291dEl0ZW06IGZvY3VzT2JqZWN0IH0pKV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNyZWF0ZUhlYWRlclR0Tm9kZTogZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gW107XG4gICAgICAgICAgICBpZiAocGFyYW1zLnBhcmVudCkge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2godHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2knLFxuICAgICAgICAgICAgICAgICAgICBjc3M6IFsnZmFzJywgJ2ZhLWFycm93LWxlZnQnLCAnZmllbGQtMiddLFxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnVpLnNldEZvY3VzT2JqZWN0KHBhcmFtcy5wYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaC5hcHBseShjaGlsZHJlbiwgcGFyYW1zLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIHJldHVybiB0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgIGNzczogWyd3b3Jrb3V0LXJ1bm5lci1oZWFkZXInXSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNyZWF0ZVN0YXRpc3RpY1R0Tm9kZXM6IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICBjc3M6IFsnZmllbGQtMiddLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWxEdXJhdGlvbiA9IGl0ZW0uZ2V0VG90YWxEdXJhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvdGFsRHVyYXRpb24gIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBNYXRoLnRydW5jKGl0ZW0uZ2V0RWxhcHNlZCgpIC8gdG90YWxEdXJhdGlvbiAqIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb2dyZXNzICsgJyUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzEwMCUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICBjc3M6IFsnZmllbGQtMiddLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGltZS5pbnQyZXh0KGl0ZW0uZ2V0VG90YWxEdXJhdGlvbigpIC0gaXRlbS5nZXRFbGFwc2VkKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSldO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLy8gd29ya291dCBiYXNpY1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAgICAgY3JlYXRlV29ya291dEJhc2ljVHROb2RlOiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUhlYWRlclR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3M6IFsnZmllbGQtZ3JvdyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBwYXJhbXMud29ya291dEJhc2ljLmdldE5hbWUoKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzOiBbJ3dvcmtvdXQtcnVubmVyLXRvb2xiYXInXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiB0aGlzLmNyZWF0ZVN0YXRpc3RpY1R0Tm9kZXMocGFyYW1zLndvcmtvdXRCYXNpYylcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiB0dC5jcmVhdGVNYXBwZWRMaXN0KHBhcmFtcy53b3Jrb3V0QmFzaWMuaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBXb3Jrb3V0SXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVXb3Jrb3V0SXRlbUNoaWxkVHROb2RlKGNlKHBhcmFtcywgeyB3b3Jrb3V0SXRlbTogaXRlbSB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgV29ya291dEl0ZW1Db2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVdvcmtvdXRJdGVtQ29sbGVjdGlvbkNoaWxkVHROb2RlKGNlKHBhcmFtcywgeyB3b3Jrb3V0SXRlbUNvbGxlY3Rpb246IGl0ZW0gfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuXG4gICAgICAgIGNyZWF0ZVdvcmtvdXRJdGVtQ2hpbGRUdE5vZGU6IGZ1bmN0aW9uIChwYXJhbXMpIHtcblxuICAgICAgICAgICAgdHQuaW5pdFByb3BlcnR5KHBhcmFtcy53b3Jrb3V0SXRlbSwgJ2V4ZXJjaXNlJyk7XG4gICAgICAgICAgICB0dC5pbml0UHJvcGVydHkocGFyYW1zLndvcmtvdXRJdGVtLmV4ZXJjaXNlLCAnaGVscFVybCcpO1xuXG4gICAgICAgICAgICB2YXIgbGluZTEgPSBbXTtcbiAgICAgICAgICAgIHZhciBoZWxwVXJsID0gcGFyYW1zLndvcmtvdXRJdGVtLmdldEV4ZXJjaXNlKCkuZ2V0SGVscFVybCgpO1xuICAgICAgICAgICAgaWYgKGhlbHBVcmwpIHtcbiAgICAgICAgICAgICAgICBsaW5lMS5wdXNoKHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhJyxcbiAgICAgICAgICAgICAgICAgICAgY3NzOiBbJ2ZpZWxkLWdyb3cnXSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcGFyYW1zLndvcmtvdXRJdGVtLmdldEV4ZXJjaXNlKCkuZ2V0TmFtZSgpOyB9LFxuICAgICAgICAgICAgICAgICAgICBocmVmOiBmdW5jdGlvbiAoKSB7IHJldHVybiBoZWxwVXJsIH0sXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogJ19ibGFuaydcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpbmUxLnB1c2godHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIGNzczogWydmaWVsZC1ncm93J10sXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBhcmFtcy53b3Jrb3V0SXRlbS5nZXRFeGVyY2lzZSgpLmdldE5hbWUoKTsgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpbmUxLnB1c2godHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICBjc3M6IFsnZmllbGQtNSddLFxuICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBhcmFtcy53b3Jrb3V0SXRlbS5nZXROYW1lKCk7IH1cbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgdmFyIGxpbmUyID0gW107XG4gICAgICAgICAgICBpZiAocGFyYW1zLndvcmtvdXRJdGVtLmdldENvdW50KCkgPiAxKSB7XG4gICAgICAgICAgICAgICAgbGluZTIucHVzaCh0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgY3NzOiBbJ2ZpZWxkLWdyb3cnXSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogZnVuY3Rpb24gKCkgeyByZXR1cm4gJ3gnICsgcGFyYW1zLndvcmtvdXRJdGVtLmdldENvdW50KCk7IH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgbGluZTIucHVzaCh0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgY3NzOiBbJ2ZpZWxkLTUnXSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGltZS5pbnQyZXh0KHBhcmFtcy53b3Jrb3V0SXRlbS5nZXREdXJhdGlvbigpKTsgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGluZTIucHVzaChzdG9wV2F0Y2guY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogcGFyYW1zLndvcmtvdXRJdGVtLmdldER1cmF0aW9uKCksXG4gICAgICAgICAgICAgICAgICAgIGZpbmlzaGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLm5vdGlmaWNhdGlvbiAmJiBuYXZpZ2F0b3Iubm90aWZpY2F0aW9uLmJlZXAoMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgcmV0dXJuIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2RpdicsXG4gICAgICAgICAgICAgICAgY3NzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyYW1zLndvcmtvdXRJdGVtLmdldENoZWNrZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsnd29ya291dC1ydW5uZXItaXRlbSddO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsnd29ya291dC1ydW5uZXItaXRlbScsICd3b3Jrb3V0LXJ1bm5lci1pdGVtLWNoZWNrZWQnXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbXMud29ya291dEl0ZW0uZ2V0Q2hlY2tlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbJ3dvcmtvdXQtcnVubmVyLWl0ZW0tY2hlY2tib3gnLCAnZmEnLCAnZmEtY2hlY2stc3F1YXJlJ107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsnd29ya291dC1ydW5uZXItaXRlbS1jaGVja2JveCcsICdmYScsICdmYS1zcXVhcmUnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMud29ya291dEl0ZW0uc2V0Q2hlY2tlZCghcGFyYW1zLndvcmtvdXRJdGVtLmdldENoZWNrZWQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M6IFsnd29ya291dC1ydW5uZXItaXRlbS1saW5lcyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsaW5lIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzOiBbJ3dvcmtvdXQtcnVubmVyLWl0ZW0tbGluZTEnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IGxpbmUxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGluZSAyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzczogWyd3b3Jrb3V0LXJ1bm5lci1pdGVtLWxpbmUyJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBsaW5lMlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcblxuICAgICAgICBjcmVhdGVXb3Jrb3V0SXRlbUNvbGxlY3Rpb25DaGlsZFR0Tm9kZTogZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIHN0YXRpc3RpY1R0Tm9kZXMgPSB0aGlzLmNyZWF0ZVN0YXRpc3RpY1R0Tm9kZXMocGFyYW1zLndvcmtvdXRJdGVtQ29sbGVjdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICBjc3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJhbXMud29ya291dEl0ZW1Db2xsZWN0aW9uLmdldENoZWNrZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsnd29ya291dC1ydW5uZXItaXRlbSddO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsnd29ya291dC1ydW5uZXItaXRlbScsICd3b3Jrb3V0LXJ1bm5lci1pdGVtLWNoZWNrZWQnXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbXMud29ya291dEl0ZW1Db2xsZWN0aW9uLmdldENoZWNrZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyd3b3Jrb3V0LXJ1bm5lci1pdGVtLWNoZWNrYm94JywgJ2ZhJywgJ2ZhLWNoZWNrLXNxdWFyZScsICdmaWVsZC0yJ107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsnd29ya291dC1ydW5uZXItaXRlbS1jaGVja2JveCcsICdmYScsICdmYS1zcXVhcmUnLCAnZmllbGQtMiddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzczogWydmaWVsZC1ncm93J10sXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBwYXJhbXMud29ya291dEl0ZW1Db2xsZWN0aW9uLmdldE5hbWUoKTsgfVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGlzdGljVHROb2Rlc1swXSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGlzdGljVHROb2Rlc1sxXV0sXG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnVpLnNldEZvY3VzT2JqZWN0KHBhcmFtcy53b3Jrb3V0SXRlbUNvbGxlY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvLyB3b3Jrb3V0IGl0ZW0gY29sbGVjdGlvblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAgICAgY3JlYXRlV29ya291dEl0ZW1Db2xsZWN0aW9uVHROb2RlOiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUhlYWRlclR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IHBhcmFtcy53b3Jrb3V0SXRlbUNvbGxlY3Rpb24ucGFyZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgdWk6IHBhcmFtcy51aSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzczogWydmaWVsZC1ncm93J10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBhcmFtcy53b3Jrb3V0SXRlbUNvbGxlY3Rpb24uZ2V0TmFtZSgpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M6IFsnd29ya291dC1ydW5uZXItdG9vbGJhciddLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IHRoaXMuY3JlYXRlU3RhdGlzdGljVHROb2RlcyhwYXJhbXMud29ya291dEl0ZW1Db2xsZWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IHR0LmNyZWF0ZU1hcHBlZExpc3QocGFyYW1zLndvcmtvdXRJdGVtQ29sbGVjdGlvbi5pdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFdvcmtvdXRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVdvcmtvdXRJdGVtQ2hpbGRUdE5vZGUoY2UocGFyYW1zLCB7IHdvcmtvdXRJdGVtOiBpdGVtIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBXb3Jrb3V0SXRlbUNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlV29ya291dEl0ZW1Db2xsZWN0aW9uQ2hpbGRUdE5vZGUoY2UocGFyYW1zLCB7IHdvcmtvdXRJdGVtQ29sbGVjdGlvbjogaXRlbSB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgIH1cblxufSk7XG4iXX0=