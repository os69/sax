"use strict";

define(['../../../../src/index', '../../model/WorkoutCollection', '../../model/WorkoutBasic', '../../model/WorkoutItemCollection', '../../model/WorkoutItem', '../../model/Root', '../common/time'], function (tt, WorkoutCollection, WorkoutBasic, WorkoutItemCollection, WorkoutItem, Root, time) {
  var ce = tt.core.cloneExtend.bind(tt.core);
  return {
    createTtNode: function createTtNode(params) {
      return tt.createTtNode({
        type: 'div',
        children: function () {
          var focusObject = params.ui.getFocusObject();

          if (focusObject instanceof WorkoutCollection) {
            return [this.createWorkoutCollectionTtNode(ce(params, {
              workoutCollection: focusObject
            }))];
          }

          if (focusObject instanceof WorkoutBasic) {
            return [this.createWorkoutBasicTtNode(ce(params, {
              workoutBasic: focusObject
            }))];
          }

          if (focusObject instanceof WorkoutItemCollection) {
            return [this.createWorkoutItemCollectionTtNode(ce(params, {
              workoutItemCollection: focusObject
            }))];
          }

          if (focusObject instanceof WorkoutItem) {
            return [this.createWorkoutItemTtNode(ce(params, {
              workoutItem: focusObject
            }))];
          }
        }.bind(this)
      });
    },
    createHeaderTtNode: function createHeaderTtNode(params) {
      var children = [];

      if (params.parent) {
        children.push(tt.createTtNode({
          type: 'i',
          css: ['fas', 'fa-arrow-left', 'field-2'],
          click: function click() {
            params.ui.setFocusObject(params.parent);
          }
        }));
      }

      children.push.apply(children, params.children);
      return tt.createTtNode({
        type: 'div',
        css: ['workout-browser-header'],
        children: children
      });
    },
    // ===================================================================
    // workout collection
    // ===================================================================
    createWorkoutCollectionTtNode: function createWorkoutCollectionTtNode(params) {
      var parent = null;

      if (!(params.workoutCollection.parent instanceof Root)) {
        parent = params.workoutCollection.parent;
      }

      return tt.createTtNode({
        type: 'div',
        children: [this.createHeaderTtNode({
          parent: parent,
          ui: params.ui,
          children: [tt.createTtNode({
            type: 'div',
            css: ['field-grow'],
            text: function text() {
              return params.workoutCollection.getName();
            }
          })]
        }), tt.createTtNode({
          type: 'div',
          children: tt.createMappedList(params.workoutCollection.workouts, function (workout) {
            if (workout instanceof WorkoutCollection) {
              return this.createWorkoutCollectionChildTtNode(ce(params, {
                workoutCollection: workout
              }));
            }

            if (workout instanceof WorkoutBasic) {
              return this.createWorkoutBasicChildTtNode(ce(params, {
                workoutBasic: workout
              }));
            }
          }.bind(this))
        })]
      });
    },
    createWorkoutCollectionChildTtNode: function createWorkoutCollectionChildTtNode(params) {
      return tt.createTtNode({
        type: 'div',
        text: function text() {
          return params.workoutCollection.getName();
        },
        css: ['workout-browser-item'],
        click: function () {
          params.ui.setFocusObject(params.workoutCollection);
        }.bind(this)
      });
    },
    createWorkoutBasicChildTtNode: function createWorkoutBasicChildTtNode(params) {
      return tt.createTtNode({
        type: 'div',
        css: ['workout-browser-item'],
        children: [tt.createTtNode({
          type: 'div',
          css: ['field-grow'],
          text: function text() {
            return params.workoutBasic.getName();
          }
        }), tt.createTtNode({
          type: 'div',
          css: ['field-5'],
          text: function text() {
            return time.int2ext(params.workoutBasic.getTotalDuration());
          }
        }), tt.createTtNode({
          type: 'i',
          css: ['fas', 'fa-play', 'workout-browser-item-field-2'],
          click: function click(event) {
            event.stopPropagation();
            params.ui.setFocusObject(params.workoutBasic);
            params.ui.setMode('workout-runner');
          }
        })],
        click: function () {
          params.ui.setFocusObject(params.workoutBasic);
        }.bind(this)
      });
    },
    // ===================================================================
    // workout basic
    // ===================================================================
    createWorkoutBasicTtNode: function createWorkoutBasicTtNode(params) {
      return tt.createTtNode({
        type: 'div',
        children: [this.createHeaderTtNode({
          parent: params.workoutBasic.parent,
          ui: params.ui,
          children: [tt.createTtNode({
            type: 'div',
            css: ['field-grow'],
            text: function text() {
              return params.workoutBasic.getName();
            }
          }), tt.createTtNode({
            type: 'div',
            css: ['field-5'],
            text: function text() {
              return time.int2ext(params.workoutBasic.getTotalDuration());
            }
          })]
        }), tt.createTtNode({
          type: 'div',
          css: ['workout-browser-toolbar'],
          children: [tt.createTtNode({
            type: 'i',
            css: ['fas', 'fa-play'],
            click: function () {
              params.ui.setMode('workout-runner');
            }.bind(this)
          })]
        }), tt.createTtNode({
          type: 'div',
          children: tt.createMappedList(params.workoutBasic.items, function (item) {
            if (item instanceof WorkoutItem) {
              return this.createWorkoutItemChildTtNode(ce(params, {
                workoutItem: item
              }));
            }

            if (item instanceof WorkoutItemCollection) {
              return this.createWorkoutItemCollectionChildTtNode(ce(params, {
                workoutItemCollection: item
              }));
            }
          }.bind(this))
        })]
      });
    },
    createWorkoutItemChildTtNode: function createWorkoutItemChildTtNode(params) {
      tt.initProperty(params.workoutItem, 'exercise');
      return tt.createTtNode({
        type: 'div',
        css: ['workout-browser-item'],
        children: [tt.createTtNode({
          type: 'div',
          css: ['field-grow'],
          text: function text() {
            return params.workoutItem.getExercise().getName();
          }
        }), tt.createTtNode({
          type: 'div',
          css: ['field-5'],
          text: function text() {
            return params.workoutItem.getName();
          }
        }), tt.createTtNode({
          type: 'div',
          css: ['field-2'],
          text: function text() {
            return 'x' + params.workoutItem.getCount();
          }
        }), tt.createTtNode({
          type: 'div',
          css: ['field-2'],
          text: function text() {
            return time.int2ext(params.workoutItem.getDuration());
          }
        })]
      });
    },
    createWorkoutItemCollectionChildTtNode: function createWorkoutItemCollectionChildTtNode(params) {
      return tt.createTtNode({
        type: 'div',
        css: ['workout-browser-item'],
        children: [tt.createTtNode({
          type: 'div',
          css: ['field-grow'],
          text: function text() {
            return params.workoutItemCollection.getName();
          }
        }), tt.createTtNode({
          type: 'div',
          css: ['field-5'],
          text: function text() {
            return time.int2ext(params.workoutItemCollection.getTotalDuration());
          }
        })],
        click: function () {
          params.ui.setFocusObject(params.workoutItemCollection);
        }.bind(this)
      });
    },
    // ===================================================================
    // workout item collection
    // ===================================================================
    createWorkoutItemCollectionTtNode: function createWorkoutItemCollectionTtNode(params) {
      return tt.createTtNode({
        type: 'div',
        children: [this.createHeaderTtNode({
          parent: params.workoutItemCollection.parent,
          ui: params.ui,
          children: [tt.createTtNode({
            type: 'div',
            css: ['field-grow'],
            text: function text() {
              return params.workoutItemCollection.getName();
            }
          }), tt.createTtNode({
            type: 'div',
            css: ['field-5'],
            text: function text() {
              return time.int2ext(params.workoutItemCollection.getTotalDuration());
            }
          })]
        }), tt.createTtNode({
          type: 'div',
          children: tt.createMappedList(params.workoutItemCollection.items, function (item) {
            if (item instanceof WorkoutItem) {
              return this.createWorkoutItemChildTtNode(ce(params, {
                workoutItem: item
              }));
            }

            if (item instanceof WorkoutItemCollection) {
              return this.createWorkoutItemCollectionChildTtNode(ce(params, {
                workoutItemCollection: item
              }));
            }
          }.bind(this))
        })]
      });
    }
  };
}); // workoutCollection
// workoutBasic
// itemCollection
// itemBasic

/*
workoutCollection: workoutCollection, workoutBasic
workoutBasic: itemCollection, itemBasic

itemCollection: itemCollection, itemBasic
itemBasic: -

*/
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NhbXBsZXMvc3BvcnRzL3VpL21vYmlsZS93b3Jrb3V0QnJvd3Nlci5qcyJdLCJuYW1lcyI6WyJkZWZpbmUiLCJ0dCIsIldvcmtvdXRDb2xsZWN0aW9uIiwiV29ya291dEJhc2ljIiwiV29ya291dEl0ZW1Db2xsZWN0aW9uIiwiV29ya291dEl0ZW0iLCJSb290IiwidGltZSIsImNlIiwiY29yZSIsImNsb25lRXh0ZW5kIiwiYmluZCIsImNyZWF0ZVR0Tm9kZSIsInBhcmFtcyIsInR5cGUiLCJjaGlsZHJlbiIsImZvY3VzT2JqZWN0IiwidWkiLCJnZXRGb2N1c09iamVjdCIsImNyZWF0ZVdvcmtvdXRDb2xsZWN0aW9uVHROb2RlIiwid29ya291dENvbGxlY3Rpb24iLCJjcmVhdGVXb3Jrb3V0QmFzaWNUdE5vZGUiLCJ3b3Jrb3V0QmFzaWMiLCJjcmVhdGVXb3Jrb3V0SXRlbUNvbGxlY3Rpb25UdE5vZGUiLCJ3b3Jrb3V0SXRlbUNvbGxlY3Rpb24iLCJjcmVhdGVXb3Jrb3V0SXRlbVR0Tm9kZSIsIndvcmtvdXRJdGVtIiwiY3JlYXRlSGVhZGVyVHROb2RlIiwicGFyZW50IiwicHVzaCIsImNzcyIsImNsaWNrIiwic2V0Rm9jdXNPYmplY3QiLCJhcHBseSIsInRleHQiLCJnZXROYW1lIiwiY3JlYXRlTWFwcGVkTGlzdCIsIndvcmtvdXRzIiwid29ya291dCIsImNyZWF0ZVdvcmtvdXRDb2xsZWN0aW9uQ2hpbGRUdE5vZGUiLCJjcmVhdGVXb3Jrb3V0QmFzaWNDaGlsZFR0Tm9kZSIsImludDJleHQiLCJnZXRUb3RhbER1cmF0aW9uIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJzZXRNb2RlIiwiaXRlbXMiLCJpdGVtIiwiY3JlYXRlV29ya291dEl0ZW1DaGlsZFR0Tm9kZSIsImNyZWF0ZVdvcmtvdXRJdGVtQ29sbGVjdGlvbkNoaWxkVHROb2RlIiwiaW5pdFByb3BlcnR5IiwiZ2V0RXhlcmNpc2UiLCJnZXRDb3VudCIsImdldER1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SDtBQUNKLFdBUGlFLENBT2hFcEMsSUFQZ0UsQ0FPM0QsSUFQMkQsQ0FBeEQ7QUFGRSxTQUFoQixDQWpCTTtBQUZTLE9BQWhCLENBQVA7QUFnQ0g7QUF2UUUsR0FBUDtBQTJRSCxDQS9RSyxDQUFOLEMsQ0FrUkE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzQ29udGVudCI6WyJkZWZpbmUoWycuLi8uLi8uLi8uLi9zcmMvaW5kZXgnLCAnLi4vLi4vbW9kZWwvV29ya291dENvbGxlY3Rpb24nLCAnLi4vLi4vbW9kZWwvV29ya291dEJhc2ljJywgJy4uLy4uL21vZGVsL1dvcmtvdXRJdGVtQ29sbGVjdGlvbicsICcuLi8uLi9tb2RlbC9Xb3Jrb3V0SXRlbScsICcuLi8uLi9tb2RlbC9Sb290JywgJy4uL2NvbW1vbi90aW1lJ10sIGZ1bmN0aW9uICh0dCwgV29ya291dENvbGxlY3Rpb24sIFdvcmtvdXRCYXNpYywgV29ya291dEl0ZW1Db2xsZWN0aW9uLCBXb3Jrb3V0SXRlbSwgUm9vdCwgdGltZSkge1xuXG4gICAgdmFyIGNlID0gdHQuY29yZS5jbG9uZUV4dGVuZC5iaW5kKHR0LmNvcmUpO1xuXG4gICAgcmV0dXJuIHtcblxuICAgICAgICBjcmVhdGVUdE5vZGU6IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiB0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb2N1c09iamVjdCA9IHBhcmFtcy51aS5nZXRGb2N1c09iamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm9jdXNPYmplY3QgaW5zdGFuY2VvZiBXb3Jrb3V0Q29sbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0aGlzLmNyZWF0ZVdvcmtvdXRDb2xsZWN0aW9uVHROb2RlKGNlKHBhcmFtcywgeyB3b3Jrb3V0Q29sbGVjdGlvbjogZm9jdXNPYmplY3QgfSkpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9jdXNPYmplY3QgaW5zdGFuY2VvZiBXb3Jrb3V0QmFzaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbdGhpcy5jcmVhdGVXb3Jrb3V0QmFzaWNUdE5vZGUoY2UocGFyYW1zLCB7IHdvcmtvdXRCYXNpYzogZm9jdXNPYmplY3QgfSkpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9jdXNPYmplY3QgaW5zdGFuY2VvZiBXb3Jrb3V0SXRlbUNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbdGhpcy5jcmVhdGVXb3Jrb3V0SXRlbUNvbGxlY3Rpb25UdE5vZGUoY2UocGFyYW1zLCB7IHdvcmtvdXRJdGVtQ29sbGVjdGlvbjogZm9jdXNPYmplY3QgfSkpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9jdXNPYmplY3QgaW5zdGFuY2VvZiBXb3Jrb3V0SXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0aGlzLmNyZWF0ZVdvcmtvdXRJdGVtVHROb2RlKGNlKHBhcmFtcywgeyB3b3Jrb3V0SXRlbTogZm9jdXNPYmplY3QgfSkpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3JlYXRlSGVhZGVyVHROb2RlOiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgICAgIGlmIChwYXJhbXMucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaCh0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaScsXG4gICAgICAgICAgICAgICAgICAgIGNzczogWydmYXMnLCAnZmEtYXJyb3ctbGVmdCcsICdmaWVsZC0yJ10sXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMudWkuc2V0Rm9jdXNPYmplY3QocGFyYW1zLnBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoLmFwcGx5KGNoaWxkcmVuLCBwYXJhbXMuY2hpbGRyZW4pO1xuICAgICAgICAgICAgcmV0dXJuIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2RpdicsXG4gICAgICAgICAgICAgICAgY3NzOiBbJ3dvcmtvdXQtYnJvd3Nlci1oZWFkZXInXSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLy8gd29ya291dCBjb2xsZWN0aW9uXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgICAgICBjcmVhdGVXb3Jrb3V0Q29sbGVjdGlvblR0Tm9kZTogZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoIShwYXJhbXMud29ya291dENvbGxlY3Rpb24ucGFyZW50IGluc3RhbmNlb2YgUm9vdCkpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJhbXMud29ya291dENvbGxlY3Rpb24ucGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2RpdicsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVIZWFkZXJUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBwYXJlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB1aTogcGFyYW1zLnVpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzOiBbJ2ZpZWxkLWdyb3cnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcGFyYW1zLndvcmtvdXRDb2xsZWN0aW9uLmdldE5hbWUoKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IHR0LmNyZWF0ZU1hcHBlZExpc3QocGFyYW1zLndvcmtvdXRDb2xsZWN0aW9uLndvcmtvdXRzLCBmdW5jdGlvbiAod29ya291dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3Jrb3V0IGluc3RhbmNlb2YgV29ya291dENvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlV29ya291dENvbGxlY3Rpb25DaGlsZFR0Tm9kZShjZShwYXJhbXMsIHsgd29ya291dENvbGxlY3Rpb246IHdvcmtvdXQgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod29ya291dCBpbnN0YW5jZW9mIFdvcmtvdXRCYXNpYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVXb3Jrb3V0QmFzaWNDaGlsZFR0Tm9kZShjZShwYXJhbXMsIHsgd29ya291dEJhc2ljOiB3b3Jrb3V0IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcblxuICAgICAgICBjcmVhdGVXb3Jrb3V0Q29sbGVjdGlvbkNoaWxkVHROb2RlOiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBwYXJhbXMud29ya291dENvbGxlY3Rpb24uZ2V0TmFtZSgpOyB9LFxuICAgICAgICAgICAgICAgIGNzczogWyd3b3Jrb3V0LWJyb3dzZXItaXRlbSddLFxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy51aS5zZXRGb2N1c09iamVjdChwYXJhbXMud29ya291dENvbGxlY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcblxuICAgICAgICBjcmVhdGVXb3Jrb3V0QmFzaWNDaGlsZFR0Tm9kZTogZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgcmV0dXJuIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2RpdicsXG4gICAgICAgICAgICAgICAgY3NzOiBbJ3dvcmtvdXQtYnJvd3Nlci1pdGVtJ10sXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzOiBbJ2ZpZWxkLWdyb3cnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBhcmFtcy53b3Jrb3V0QmFzaWMuZ2V0TmFtZSgpOyB9LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzOiBbJ2ZpZWxkLTUnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRpbWUuaW50MmV4dChwYXJhbXMud29ya291dEJhc2ljLmdldFRvdGFsRHVyYXRpb24oKSk7IH1cbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M6IFsnZmFzJywgJ2ZhLXBsYXknLCAnd29ya291dC1icm93c2VyLWl0ZW0tZmllbGQtMiddLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy51aS5zZXRGb2N1c09iamVjdChwYXJhbXMud29ya291dEJhc2ljKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMudWkuc2V0TW9kZSgnd29ya291dC1ydW5uZXInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy51aS5zZXRGb2N1c09iamVjdChwYXJhbXMud29ya291dEJhc2ljKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvLyB3b3Jrb3V0IGJhc2ljXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgICAgICBjcmVhdGVXb3Jrb3V0QmFzaWNUdE5vZGU6IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiB0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlSGVhZGVyVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogcGFyYW1zLndvcmtvdXRCYXNpYy5wYXJlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB1aTogcGFyYW1zLnVpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzOiBbJ2ZpZWxkLWdyb3cnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcGFyYW1zLndvcmtvdXRCYXNpYy5nZXROYW1lKCk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzczogWydmaWVsZC01J10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRpbWUuaW50MmV4dChwYXJhbXMud29ya291dEJhc2ljLmdldFRvdGFsRHVyYXRpb24oKSk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzczogWyd3b3Jrb3V0LWJyb3dzZXItdG9vbGJhciddLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzczogWydmYXMnLCAnZmEtcGxheSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnVpLnNldE1vZGUoJ3dvcmtvdXQtcnVubmVyJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogdHQuY3JlYXRlTWFwcGVkTGlzdChwYXJhbXMud29ya291dEJhc2ljLml0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgV29ya291dEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlV29ya291dEl0ZW1DaGlsZFR0Tm9kZShjZShwYXJhbXMsIHsgd29ya291dEl0ZW06IGl0ZW0gfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFdvcmtvdXRJdGVtQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVXb3Jrb3V0SXRlbUNvbGxlY3Rpb25DaGlsZFR0Tm9kZShjZShwYXJhbXMsIHsgd29ya291dEl0ZW1Db2xsZWN0aW9uOiBpdGVtIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcblxuICAgICAgICBjcmVhdGVXb3Jrb3V0SXRlbUNoaWxkVHROb2RlOiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICB0dC5pbml0UHJvcGVydHkocGFyYW1zLndvcmtvdXRJdGVtLCAnZXhlcmNpc2UnKTtcbiAgICAgICAgICAgIHJldHVybiB0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgIGNzczogWyd3b3Jrb3V0LWJyb3dzZXItaXRlbSddLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICAgIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzczogWydmaWVsZC1ncm93J10sICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBhcmFtcy53b3Jrb3V0SXRlbS5nZXRFeGVyY2lzZSgpLmdldE5hbWUoKTsgfVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzOiBbJ2ZpZWxkLTUnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBhcmFtcy53b3Jrb3V0SXRlbS5nZXROYW1lKCk7IH1cbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzczogWydmaWVsZC0yJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbiAoKSB7IHJldHVybiAneCcgKyBwYXJhbXMud29ya291dEl0ZW0uZ2V0Q291bnQoKTsgfVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzOiBbJ2ZpZWxkLTInXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRpbWUuaW50MmV4dChwYXJhbXMud29ya291dEl0ZW0uZ2V0RHVyYXRpb24oKSk7IH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuXG4gICAgICAgIGNyZWF0ZVdvcmtvdXRJdGVtQ29sbGVjdGlvbkNoaWxkVHROb2RlOiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICBjc3M6IFsnd29ya291dC1icm93c2VyLWl0ZW0nXSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICB0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M6IFsnZmllbGQtZ3JvdyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcGFyYW1zLndvcmtvdXRJdGVtQ29sbGVjdGlvbi5nZXROYW1lKCk7IH0sXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB0dC5jcmVhdGVUdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M6IFsnZmllbGQtNSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGltZS5pbnQyZXh0KHBhcmFtcy53b3Jrb3V0SXRlbUNvbGxlY3Rpb24uZ2V0VG90YWxEdXJhdGlvbigpKTsgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnVpLnNldEZvY3VzT2JqZWN0KHBhcmFtcy53b3Jrb3V0SXRlbUNvbGxlY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvLyB3b3Jrb3V0IGl0ZW0gY29sbGVjdGlvblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAgICAgY3JlYXRlV29ya291dEl0ZW1Db2xsZWN0aW9uVHROb2RlOiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUhlYWRlclR0Tm9kZSh7ICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IHBhcmFtcy53b3Jrb3V0SXRlbUNvbGxlY3Rpb24ucGFyZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgdWk6IHBhcmFtcy51aSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHQuY3JlYXRlVHROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzczogWydmaWVsZC1ncm93J10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBhcmFtcy53b3Jrb3V0SXRlbUNvbGxlY3Rpb24uZ2V0TmFtZSgpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3M6IFsnZmllbGQtNSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aW1lLmludDJleHQocGFyYW1zLndvcmtvdXRJdGVtQ29sbGVjdGlvbi5nZXRUb3RhbER1cmF0aW9uKCkpIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHR0LmNyZWF0ZVR0Tm9kZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiB0dC5jcmVhdGVNYXBwZWRMaXN0KHBhcmFtcy53b3Jrb3V0SXRlbUNvbGxlY3Rpb24uaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBXb3Jrb3V0SXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVXb3Jrb3V0SXRlbUNoaWxkVHROb2RlKGNlKHBhcmFtcywgeyB3b3Jrb3V0SXRlbTogaXRlbSB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgV29ya291dEl0ZW1Db2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVdvcmtvdXRJdGVtQ29sbGVjdGlvbkNoaWxkVHROb2RlKGNlKHBhcmFtcywgeyB3b3Jrb3V0SXRlbUNvbGxlY3Rpb246IGl0ZW0gfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICB9XG5cbn0pO1xuXG5cbi8vIHdvcmtvdXRDb2xsZWN0aW9uXG4vLyB3b3Jrb3V0QmFzaWNcbi8vIGl0ZW1Db2xsZWN0aW9uXG4vLyBpdGVtQmFzaWNcblxuLypcbndvcmtvdXRDb2xsZWN0aW9uOiB3b3Jrb3V0Q29sbGVjdGlvbiwgd29ya291dEJhc2ljXG53b3Jrb3V0QmFzaWM6IGl0ZW1Db2xsZWN0aW9uLCBpdGVtQmFzaWNcblxuaXRlbUNvbGxlY3Rpb246IGl0ZW1Db2xsZWN0aW9uLCBpdGVtQmFzaWNcbml0ZW1CYXNpYzogLVxuXG4qL1xuXG5cbiJdfQ==